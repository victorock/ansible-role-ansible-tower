---
dependencies:
  - role: geerlingguy.repo-epel
    when: ansible_os_family == 'RedHat'

  - role: geerlingguy.ansible

  - role: victorock.ansible-tower-setup

  - role: geerlingguy.pip
    pip_install_packages:
      - name: ansible-tower-cli
      - name: ansible-tower-cli
        virtualenv: "/var/lib/awx/venv/awx"
      - name: ansible-tower-cli
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: pywinrm
        virtualenv: "/var/lib/awx/venv/awx"
      - name: pywinrm
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: ncclient
        virtualenv: "/var/lib/awx/venv/awx"
      - name: ncclient
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: f5-sdk
        virtualenv: "/var/lib/awx/venv/awx"
      - name: f5-sdk
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: f5-icontrol-rest
        virtualenv: "/var/lib/awx/venv/awx"
      - name: f5-icontrol-rest
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: ipaddress
        virtualenv: "/var/lib/awx/venv/awx"
      - name: ipaddress
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: passlib
        virtualenv: "/var/lib/awx/venv/awx"
      - name: passlib
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: pandevice
        virtualenv: "/var/lib/awx/venv/awx"
      - name: pandevice
        virtualenv: "/var/lib/awx/venv/ansible"
      - name: pan-python
        virtualenv: "/var/lib/awx/venv/awx"
      - name: pan-python
        virtualenv: "/var/lib/awx/venv/ansible"

  - role: victorock.ansible-tower-config
  - role: victorock.ansible-tower-facts

galaxy_info:
  author: Victor da Costa
  description: Deploy Ansible Tower by Red Hat
  license: GPLv3
  min_ansible_version: 2.4
  platforms:
  - name: EL
    versions:
    - 7
  galaxy_tags:
    - ansible
    - tower
